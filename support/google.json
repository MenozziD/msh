SYNC REQUEST
{
    "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
    "inputs": [{
      "intent": "action.devices.SYNC"
    }]
}

SYNC RESPONSE
{
  "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
  "payload": {
    "agentUserId": "1836.15267389",
    "devices": [
      {
        "id": "123",
        "type": "action.devices.types.SWITCH",
        "traits": [
          "action.devices.traits.OnOff"
        ],
        "name": {
          "defaultNames": [
            "Smart Switch"
          ],
          "name": "switch",
          "nicknames": []
        },
        "willReportState": false,
        "deviceInfo": {
          "manufacturer": "AAA",
          "model": "442",
          "hwVersion": "3.2",
          "swVersion": "11.4"
        },
        "customData": {
          "fooValue": 10,
          "barValue": true,
          "bazValue": "switchabc"
        }
      }
    ]
  }
}

SYNC MY RESPONSE
{
  "requestId": "data['requestId']",
  "payload": {
    "agentUserId": "01011980",
    "devices": [
      {
        "id": "dev['net_mac']",
        "type": "action.devices.types.SWITCH",
        "traits": [
          "action.devices.traits.OnOff"
        ],
        "name": {
          "defaultNames": [
            "Smart Switch"
          ],
          "name": "dev['net_code']",
          "nicknames": []
        },
        "willReportState": true,
        "deviceInfo": {
          "manufacturer": "MSH",
          "model": "1",
          "hwVersion": "1.0",
          "swVersion": "1.0"
        },
        "customData": {
          "mshType": "dev['net_type']"
        }
      }
    ]
  }
}

QUERY REQUEST
{
  "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
  "inputs": [{
    "intent": 'action.devices.QUERY',
    "payload": {
      "devices": [{
        "id": "123",
        "customData": {
          "fooValue": 74,
          "barValue": true,
          "bazValue": "foo"
        }
      }]
    }
  }]
}

QUERY RESPONSE
{
  "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
  "payload": {
    "devices": {
      "123": {
        "on": true,
        "online": true
      }
    }
  }
}

QUERY MY RESPONSE
{
  "requestId": "data['requestId']",
  "payload": {
    "devices": {
      "data['inputs'][0]['payload']['devices'][0]['id']": {
        "on": "device_cmd(dev['net_code'], 'stato')",
        "online": "device_cmd(dev['net_code'], 'online')"
      }
    }
  }
}

EXECUTE REQUEST
{
  "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
  "inputs": [{
    "intent": "action.devices.EXECUTE",
    "payload": {
      "commands": [{
        "devices": [{
          "id": "123",
          "customData": {
            "fooValue": 74,
            "barValue": true,
            "bazValue": "sheepdip"
          }
        }],
        "execution": [{
          "command": "action.devices.commands.OnOff",
          "params": {
            "on": true
          }
        }]
      }]
    }
  }]
}

EXECUTE MY REQUEST
{
  "command": "action.devices.commands.OnOff",
  "params": {
    "on": "boolean"
  }
}

EXECUTE RESPONSE
{
  "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
  "payload": {
    "commands": [
      {
        "ids": [
          "123"
        ],
        "status": "SUCCESS",
        "states": {
          "on": true,
          "online": true
        }
      },
      {
        "ids": [
          "456"
        ],
        "status": "ERROR",
        "errorCode": "deviceTurnedOff"
      }
    ]
  }
}

EXECUTE MY RESPONSE SUCCESS -- SI POTREBBE LEGGERE DA DB LO STATO E ONLINE
{
  "requestId": "data['requestId']",
  "payload": {
    "commands": [
      {
        "ids": [
          "data['inputs'][0]['payload']['commands'][0]['devices'][0]['id']"
        ],
        "status": "SUCCESS",
        "states": {
          "on": "device_cmd(dev['net_code'], 'stato')",
          "online": "device_cmd(dev['net_code'], 'online')"
        }
      }
    ]
  }
}

EXECUTE MY RESPONSE ERROR
{
  "requestId": "data['requestId']",
  "payload": {
    "commands": [
      {
        "ids": [
          "data['inputs'][0]['payload']['commands'][0]['devices'][0]['id']"
        ],
        "status": "ERROR",
        "errorCode": "result['output']"
      }
    ]
  }
}
