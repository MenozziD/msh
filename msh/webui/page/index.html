<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- Bootstrap CSS -->
		<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

        <!-- Font CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

		<!-- jQuery first, then Popper.js, then Bootstrap JS, Handlebars -->
		<script src="https://code.jquery.com/jquery-3.4.0.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
		<script src="https://twitter.github.io/typeahead.js/js/handlebars.js"></script>

		<script src="/static/js/home.js"></script>

		<title>Home</title>
	</head>
	<body>
		<div class="container">
			<h4 class="mb-3 mt-3 text-center">Home</h4>
			<div class="mb-3 row">
				<div class="col-md-12">
					<form id="form">
						<div class="row">
                            <div class="col-md-3 mb-3">
							    <div class="dropdown">
                                    <label for="device">Dispositivo</label>
						  		    <button class="btn btn-secondary btn-lg btn-block dropdown-toggle " type="button" data-toggle="dropdown" id="device" onclick="device_net_code()"></button>
									<ul class="dropdown-menu" id="drop_device">
                                    </ul>
                                </div>
                                <script id="drop_device-template" type="text/x-handlebars-template">
                                    {{#each this}}
                                        <li class="dropdown-item">{{net_code}}</li>
                                    {{/each}}
                                </script>
								<div class="invalid-feedback" id="chk_device">
									Il dispositivo &egrave un campo obbligatorio
								</div>
                            </div>
                            <div class="col-md-3 mb-3">
							    <div class="dropdown">
                                    <label for="device">Comando</label>
						  		    <button class="btn btn-secondary btn-lg btn-block dropdown-toggle " type="button" data-toggle="dropdown" id="command" onclick="net_device('command')"></button>
                                    <ul class="dropdown-menu" id="drop_command">
                                    </ul>
                                </div>
                                <script id="drop_command-template" type="text/x-handlebars-template">
                                    {{#each this}}
                                        <li class="dropdown-item">{{cmd_str}}</li>
                                    {{/each}}
                                </script>
								<div class="invalid-feedback" id="chk_command">
									Il comando &egrave un campo obbligatorio
								</div>
                            </div>
							<div class="col-md-3 mb-3">
								<label for="result">Esito</label>
								<input type="text" class="form-control" id="result" readonly>
							</div>
							<div class="col-md-3 mb-3">
								<label for="cmd_result">Esito Comando</label>
								<input type="text" class="form-control" id="cmd_result" readonly>
							</div>
							<button class="btn btn-primary btn-lg btn-block" type="button" onclick="net_cmd()">Invia</button>
						</div>
					</form>
				</div>
			</div>
			<div class="mb-3 row">
				<div class="col-md-12">
				    <form>
						<div class="row">
							<div class="col-md-3 mb-3">
								<label for="esito">Esito</label>
								<input type="text" class="form-control" id="esito" readonly>
							</div>
							<div class="col-md-3 mb-3">
								<label for="found">Trovati</label>
								<input type="text" class="form-control" id="found" readonly>
							</div>
							<div class="col-md-3 mb-3">
								<label for="new">Nuovi</label>
								<input type="text" class="form-control" id="new" readonly>
							</div>
							<div class="col-md-3 mb-3">
								<label for="update">Aggiornati</label>
								<input type="text" class="form-control" id="update" readonly>
							</div>
							<button class="btn btn-primary btn-lg btn-block" type="button" onclick="net_scan()">Net Scan</button>
						</div>
				    </form>
				</div>
		    </div>
			<div class="row">
				<div class="col-md-12">
					<div class="row">
						<button class="mb-3 btn btn-primary btn-lg btn-block" type="button" onclick="net_device('list')">List Device</button>
					</div>
                    <h5 id="errore" class="text-center d-none"></h5>
					<div  id="table-device" class="table-responsive"></div>
                    <script id="table-device-template" type="text/x-handlebars-template">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Codice</th>
                                    <th>Tipo</th>
                                    <th>Stato</th>
                                    <th>IP</th>
                                    <th>MAC</th>
                                    <th>MAC info</th>
                                    <th>User SSH</th>
                                    <th>Password SSH</th>
                                    <th>Ultimo aggiornamento</th>
                                    <th>Salvataggio</th>
                                    <th>Reset</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#each this}}
                                    <tr>
                                        <td>
                                            <input class="form-control" style="width: auto" type="text" id="code{{@index}}" value="{{net_code}}">
                                        </td>
                                        <td>
                                            <div class="dropdown{{@index}}">
                                                <button class="btn btn-secondary btn-lg btn-block dropdown-toggle " type="button" data-toggle="dropdown" id="type{{@index}}" onclick="net_device('type{{@index}}')" value="{{net_type}}">{{net_type}}</button>
                                                <ul class="dropdown-menu" id="drop_type{{@index}}"></ul>
                                            </div>
                                        </td>
                                        <td>{{net_status}}</td>
                                        <td>{{net_ip}}</td>
                                        <td>
                                            <span id="mac{{@index}}">{{net_mac}}</span>
                                        </td>
                                        <td>{{net_mac_info}}</td>
                                        <td>
                                            <input class="form-control" style="width: auto" type="text" id="usr{{@index}}" value="{{net_usr}}">
                                        </td>
                                        <td>
                                            <div class="input-group" style="width: 230px">
                                                <input class="form-control" id="psw{{@index}}" value="{{net_psw}}" type="password">
                                                <div class="input-group-append">
                                                    <button class="btn btn-primary input-group-button" onclick="view_password({{@index}})">
                                                        <i id="psw_icon{{@index}}" class="fa fa-eye-slash" aria-hidden="true"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </td>
                                        <td>{{net_last_update}}</td>
                                        <td>
                                            <button disabled class="btn btn-primary btn-lg btn-block" type="button" id="salva{{@index}}" onclick="net_device('update{{@index}}')">Salva</button>
                                        </td>
                                        <td>
                                            <button disabled class="btn btn-primary btn-lg btn-block" type="button" id="reset{{@index}}" onclick="net_reset('{{@index}}')">Reset</button>
                                        </td>
                                    </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    </script>
                    <script id="drop_type-template" type="text/x-handlebars-template">
                        {{#each this}}
                            <li class="dropdown-item">{{type_code}}</li>
                        {{/each}}
                    </script>
				</div>
		    </div>
		</div>
	</body>
</html>
